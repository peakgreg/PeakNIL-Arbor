<div class="tab-bar custom-nav-pills">
 <a class="tab" href="/dashboard" data-page="dashboard">
   <div class="tab-icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none">
        <path d="M2 6C2 4.11438 2 3.17157 2.58579 2.58579C3.17157 2 4.11438 2 6 2C7.88562 2 8.82843 2 9.41421 2.58579C10 3.17157 10 4.11438 10 6V8C10 9.88562 10 10.8284 9.41421 11.4142C8.82843 12 7.88562 12 6 12C4.11438 12 3.17157 12 2.58579 11.4142C2 10.8284 2 9.88562 2 8V6Z" stroke="currentColor" stroke-width="1.5" />
        <path d="M2 19C2 18.0681 2 17.6022 2.15224 17.2346C2.35523 16.7446 2.74458 16.3552 3.23463 16.1522C3.60218 16 4.06812 16 5 16H7C7.93188 16 8.39782 16 8.76537 16.1522C9.25542 16.3552 9.64477 16.7446 9.84776 17.2346C10 17.6022 10 18.0681 10 19C10 19.9319 10 20.3978 9.84776 20.7654C9.64477 21.2554 9.25542 21.6448 8.76537 21.8478C8.39782 22 7.93188 22 7 22H5C4.06812 22 3.60218 22 3.23463 21.8478C2.74458 21.6448 2.35523 21.2554 2.15224 20.7654C2 20.3978 2 19.9319 2 19Z" stroke="currentColor" stroke-width="1.5" />
        <path d="M14 16C14 14.1144 14 13.1716 14.5858 12.5858C15.1716 12 16.1144 12 18 12C19.8856 12 20.8284 12 21.4142 12.5858C22 13.1716 22 14.1144 22 16V18C22 19.8856 22 20.8284 21.4142 21.4142C20.8284 22 19.8856 22 18 22C16.1144 22 15.1716 22 14.5858 21.4142C14 20.8284 14 19.8856 14 18V16Z" stroke="currentColor" stroke-width="1.5" />
        <path d="M14 5C14 4.06812 14 3.60218 14.1522 3.23463C14.3552 2.74458 14.7446 2.35523 15.2346 2.15224C15.6022 2 16.0681 2 17 2H19C19.9319 2 20.3978 2 20.7654 2.15224C21.2554 2.35523 21.6448 2.74458 21.8478 3.23463C22 3.60218 22 4.06812 22 5C22 5.93188 22 6.39782 21.8478 6.76537C21.6448 7.25542 21.2554 7.64477 20.7654 7.84776C20.3978 8 19.9319 8 19 8H17C16.0681 8 15.6022 8 15.2346 7.84776C14.7446 7.64477 14.3552 7.25542 14.1522 6.76537C14 6.39782 14 5.93188 14 5Z" stroke="currentColor" stroke-width="1.5" />
    </svg>
   </div>
   Dashboard
 </a>
 <a class="tab" href="/marketplace" data-page="marketplace">
   <div class="tab-icon">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none">
          <path d="M2.5 12C2.5 7.52166 2.5 5.28249 3.89124 3.89124C5.28249 2.5 7.52166 2.5 12 2.5C16.4783 2.5 18.7175 2.5 20.1088 3.89124C21.5 5.28249 21.5 7.52166 21.5 12C21.5 16.4783 21.5 18.7175 20.1088 20.1088C18.7175 21.5 16.4783 21.5 12 21.5C7.52166 21.5 5.28249 21.5 3.89124 20.1088C2.5 18.7175 2.5 16.4783 2.5 12Z" stroke="currentColor" stroke-width="1.5" />
          <path d="M7.5 17C9.8317 14.5578 14.1432 14.4428 16.5 17M14.4951 9.5C14.4951 10.8807 13.3742 12 11.9915 12C10.6089 12 9.48797 10.8807 9.48797 9.5C9.48797 8.11929 10.6089 7 11.9915 7C13.3742 7 14.4951 8.11929 14.4951 9.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
      </svg>
   </div>
   Marketplace
 </a>
 <a class="tab" href="/deals" data-page="deals">
   <div class="tab-icon">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none">
          <path d="M22 6.75H18L15.7558 5.25685C15.263 4.92636 14.6839 4.75 14.0917 4.75H11.7426C10.947 4.75 10.1839 5.06795 9.62132 5.63391L7 8.27083L8.10218 9.15782C8.89796 9.79823 10.0452 9.73432 10.7658 9.00942L12 7.76785H13L19 13.8036C19.5523 14.3591 19.5523 15.2599 19 15.8155C18.4477 16.371 17.5523 16.371 17 15.8155L16.5 15.3125M13.5 12.2946L16.5 15.3125M16.5 15.3125C17.0523 15.8681 17.0523 16.7688 16.5 17.3244C15.9477 17.88 15.0523 17.88 14.5 17.3244L13.5 16.3184M13.5 16.3184C14.0523 16.874 14.0523 17.7748 13.5 18.3303C12.9477 18.8859 12.0523 18.8859 11.5 18.3303L10 16.8214M13.5 16.3184L11.5 14.3184M9.5 16.3184L10 16.8214M10 16.8214C10.5523 17.377 10.5523 18.2777 10 18.8333C9.44772 19.3889 8.55229 19.3889 8 18.8333L4 14.75H2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M22 14.75H19.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
          <path d="M8.5 6.75L2 6.75" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
      </svg>
   </div>
   <?php /* <div class="notification-badge">483</div> */ ?>
   Deals
 </a>
  <a class="tab" href="#" data-bs-toggle="offcanvas" data-bs-target="#offcanvasBottom" aria-controls="offcanvasBottom">
    <div class="tab-icon">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none">
          <path d="M22 12C22 10.8954 21.1046 10 20 10C18.8954 10 18 10.8954 18 12C18 13.1046 18.8954 14 20 14C21.1046 14 22 13.1046 22 12Z" stroke="currentColor" stroke-width="1.5" />
          <path d="M14 12C14 10.8954 13.1046 10 12 10C10.8954 10 10 10.8954 10 12C10 13.1046 10.8954 14 12 14C13.1046 14 14 13.1046 14 12Z" stroke="currentColor" stroke-width="1.5" />
          <path d="M6 12C6 10.8954 5.10457 10 4 10C2.89543 10 2 10.8954 2 12C2 13.1046 2.89543 14 4 14C5.10457 14 6 13.1046 6 12Z" stroke="currentColor" stroke-width="1.5" />
      </svg>
    </div>
    Menu
  </a>
</div>
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Apply standalone adjustments immediately
  if (window.navigator.standalone) {
    document.querySelector('.tab-bar').style.paddingBottom = 'calc(0px + env(safe-area-inset-bottom, 0px))';
  }

  // Show content after a short delay to ensure layout is stable
  setTimeout(function() {
    document.body.classList.add('content-loaded');
  }, 50);

  // Function to set active tab
  function setActiveTab(page) {
    const tabs = document.querySelectorAll('.tab-bar .tab');
    tabs.forEach(tab => {
      if (tab.getAttribute('data-page') === page) {
        tab.classList.add('active');
      } else {
        tab.classList.remove('active');
      }
    });
  }

  // Add click event listeners to all tabs
  const tabs = document.querySelectorAll('.tab-bar .tab');
  tabs.forEach(tab => {
    tab.addEventListener('click', function(e) {
      const page = this.getAttribute('data-page');
      setActiveTab(page);
      localStorage.setItem('activePage', page);
    });
  });

  // Check URL parameter first, then localStorage
  const urlParams = new URLSearchParams(window.location.search);
  const pageFromURL = urlParams.get('page');
  const pageFromStorage = localStorage.getItem('activePage');

  if (pageFromURL) {
    setActiveTab(pageFromURL);
    localStorage.setItem('activePage', pageFromURL);
  } else if (pageFromStorage) {
    setActiveTab(pageFromStorage);
  } else {
    // Default to 'dashboard' if no page is specified
    setActiveTab('dashboard');
    localStorage.setItem('activePage', 'dashboard');
  }
});
</script>

<?php
// MARK: Offcanvas Menu
?>
<div class="offcanvas offcanvas-bottom" tabindex="-1" id="offcanvasBottom" aria-labelledby="offcanvasBottomLabel" style = "border-top-left-radius: 20px; border-top-right-radius: 20px; height: 50% !important;">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="offcanvasBottomLabel">Menu</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
  </div>
  <div class="offcanvas-body">
    <!-- Your off-canvas content goes here -->
    <style>
        .icon-column {
            text-align: center;
            padding: 20px;
        }
        .icon-column a {
            text-decoration: none;
            color: inherit; /* Inherit the color from the parent */
            display: block; /* Make the link fill the column */
        }
        .icon-column i {
            font-size: 24px;
            margin-bottom: 10px;
        }
    </style>
    <div class="container">
        <div class="row">
            <div class="col-4 icon-column">
                <a href="?page=wallet">
                    <i class="hgi-duotone hgi-wallet-03"></i>
                    <p>Wallet</p>
                </a>
            </div>
            <div class="col-4 icon-column">
                <a href="?page=settings">
                    <i class="hgi-duotone hgi-settings-01"></i>
                    <p>Settings</p>
                </a>
            </div>
            <div class="col-4 icon-column">
                <a href="?page=support">
                    <i class="hgi-duotone hgi-customer-support"></i>
                    <p>Support</p>
                </a>
            </div>
        </div>
    </div>
  </div>
</div>

<style>
  a.tab:focus {
    outline: none;
  }
</style>